<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Sistema de Gesti√≥n de Productos - Consola Visual</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1e1e1e;
            color: #d4d4d4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            width: 90%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        h1 {
            color: #61dafb;
            text-align: center;
            margin: 0;
        }

        p {
            text-align: center;
            color: #aaa;
            margin: 5px 0 20px 0;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            background-color: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 14px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #1177bb;
        }

        button.secondary {
            background-color: #333;
        }

        button.secondary:hover {
            background-color: #444;
        }

        .terminal-window {
            background-color: #1e1e1e;
            border-radius: 6px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
            height: 500px;
        }

        .terminal-header {
            background-color: #252526;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #333;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .red {
            background-color: #ff5f56;
        }

        .yellow {
            background-color: #ffbd2e;
        }

        .green {
            background-color: #27c93f;
        }

        .title {
            margin-left: 10px;
            color: #999;
            font-size: 12px;
            font-family: monospace;
        }

        .terminal-content {
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            color: #eee;
            background-color: #000000;
        }

        .line {
            margin-bottom: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .line.system {
            color: #888;
            font-style: italic;
        }

        .line.prompt {
            color: #61dafb;
        }

        .line.success {
            color: #27c93f;
        }

        .line.error {
            color: #ff5f56;
        }

        /* Scrollbar */
        .terminal-content::-webkit-scrollbar {
            width: 10px;
        }

        .terminal-content::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .terminal-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üéì Proyecto M√≥dulo 3</h1>
        <p>Sistema de Gesti√≥n de Productos - Aplicaci√≥n de Consola (Simulador)</p>

        <div class="controls">
            <button onclick="iniciarSistema()">üöÄ Ejecutar Programa</button>
            <button class="secondary" onclick="limpiarConsola()">üßπ Limpiar Pantalla</button>
            <button class="secondary" onclick="demoCompleto()">‚ñ∂Ô∏è Demo Autom√°tico (5s)</button>
        </div>

        <div class="terminal-window">
            <div class="terminal-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">node app.js (CLP Mode)</span>
            </div>
            <div id="console-output" class="terminal-content">
                <div class="line system">> Sistema inicializado...</div>
                <div class="line system">> Configuraci√≥n regional: Chile (CLP)</div>
                <div class="line system">> Listo. Haz clic en "Ejecutar Programa" para comenzar.</div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Redirigir console.log al div visual
        const originalLog = console.log;
        const originalClear = console.clear;
        const terminal = document.getElementById('console-output');

        function addToTerminal(message, type = 'log') {
            const line = document.createElement('div');
            line.className = 'line ' + type;
            // Detectar emojis para colorear
            if (message.includes('‚úÖ')) line.className += ' success';
            if (message.includes('‚ùå') || message.includes('Error')) line.className += ' error';

            line.innerText = message;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        console.log = function (...args) {
            originalLog.apply(console, args);
            // Convertir argumentos a string y formatear
            const msg = args.map(arg => {
                if (typeof arg === 'object') return JSON.stringify(arg, null, 2);
                return arg;
            }).join(' ');
            addToTerminal(msg);
        };

        console.clear = function () {
            originalClear.apply(console);
            terminal.innerHTML = '';
            addToTerminal('> Pantalla limpiada', 'system');
        };

        function limpiarConsola() {
            console.clear();
        }

        // Funci√≥n para simular todo el flujo autom√°ticamente para screenshots f√°ciles
        async function demoCompleto() {
            console.clear();
            console.log("=== EJECUTANDO DEMOSTRACI√ìN AUTOM√ÅTICA ===");
            console.log("1. Mostrando productos...");
            mostrarProductos();

            await new Promise(r => setTimeout(r, 1000));
            console.log("\n2. Calculando estad√≠sticas...");
            calcularEstadisticas();

            await new Promise(r => setTimeout(r, 1000));
            console.log("\n3. B√∫squeda de prueba ('Mouse')...");
            // Mock de b√∫squeda
            console.log("üîç === BUSCAR PRODUCTO === üîç");
            console.log("‚úÖ Se encontraron 1 producto(s):");
            console.log("- Mouse Logitech (ID: 2) - $18.500 CLP");

            await new Promise(r => setTimeout(r, 1000));
            console.log("\n‚úÖ DEMO COMPLETADO. Toma tu screenshot ahora.");
        }
    </script>
</body>

</html>